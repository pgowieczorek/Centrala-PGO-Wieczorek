<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tylko Temperatura</title>
    <style>
        /* Styl minimalistyczny - tylko temperatura na środku */
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #ffffff; /* Białe tło */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        #temp {
            font-size: 80px; /* Bardzo duża czcionka */
            font-weight: 800;
            color: #222;
            transition: opacity 0.3s ease; /* Płynne mignięcie przy odświeżaniu */
        }

        .refreshing {
            opacity: 0.5; /* Efekt mignięcia */
        }
    </style>
</head>
<body>

    <div id="temp">--.-°C</div>

    <script>
        // TUTAJ WKLEJ SWÓJ LINK
        const mojLink = 'https://svr155.supla.org/direct/39/cDhUT_QcRLegx/read';

        async function odswiezTermometr() {
            const wyswietlacz = document.getElementById('temp');
            
            try {
                // Cache-busting: dodajemy unikalny znacznik czasu, by oszukać Proxy i mieć świeże dane
                const ts = Date.now();
                const url = 'https://corsproxy.io/?' + encodeURIComponent(mojLink + '?t=' + ts);
                
                const res = await fetch(url);
                const data = await res.json();
                
                // Pobieramy wartość temperatury
                let t = data.temperature ?? data.temp ?? (data.state ? data.state.temp : null);

                if (t !== null) {
                    // Lekki efekt mignięcia, żebyś widział, że dane "weszły"
                    wyswietlacz.classList.add('refreshing');
                    
                    setTimeout(() => {
                        wyswietlacz.innerText = parseFloat(t).toFixed(1) + "°C";
                        wyswietlacz.classList.remove('refreshing');
                    }, 300);
                }
            } catch (e) {
                console.error("Problem z pobraniem danych");
            }
        }

        // Start: odświeżaj co 5000ms (5 sekund)
        setInterval(odswiezTermometr, 5000);
        odswiezTermometr(); // Wywołanie od razu po wejściu na stronę
    </script>
</body>
</html>
